import{A as I}from"./AcceptableItem.95d03f94.js";import{u as N}from"./userStore.df57d0cc.js";import{s as C,r as p,b as d,c as E,w as x,d as j,e as k,f as i,g as l,h as v,i as A,m as F,F as B,n as D,l as _,E as r}from"./index.25c5763d.js";import{d as G,r as h}from"./group.e63d0de3.js";import{_ as R}from"./_plugin-vue_export-helper.cdc0426e.js";/* empty css                                                                       */const S={class:"infinite-list"},z={__name:"InviteList",setup(M){const b=N(),{token:c}=C(b),u=p(!1),g=p(!1),m=d({pageSize:5,pageNum:1}),{t:n}=E(),a=d([]);p(0);function f(){!g.value&&!u.value&&(u.value=!0,G(c.value,m).then(e=>{e.data.success?e.data.data.length>0?(a.push(...e.data.data),m.pageNum+=1):g.value=!0:r({type:"error",message:e.data.msg,showClose:!0,grouping:!0})}).catch(e=>{r({type:"error",message:n("inviteList.loadError"),showClose:!0,grouping:!0}),console.log(e)}).finally(()=>{u.value=!1}))}function y(e){for(let s=0;s<a.length;s++)e==a[s].id&&h(c.value,e,!0).then(t=>{t.data.success?a.splice(s,1):r({type:"error",message:t.data.msg,showClose:!0,grouping:!0})}).catch(t=>{r({type:"error",message:n("inviteList.acceptError"),showClose:!0,grouping:!0}),console.log(t)}).finally(()=>{})}function w(e){for(let s=0;s<a.length;s++)e==a[s].id&&h(c.value,e,!1).then(t=>{t.data.success?a.splice(s,1):r({type:"error",message:t.data.msg,showClose:!0,grouping:!0})}).catch(t=>{r({type:"error",message:n("inviteList.rejectError"),showClose:!0,grouping:!0}),console.log(t)}).finally(()=>{})}return x(()=>a.length,e=>{e<=5&&f()}),(e,s)=>{const t=j("el-scrollbar"),L=k("infinite-scroll");return i(),l("div",null,[v(t,{height:"75vh",id:"all"},{default:A(()=>[F((i(),l("ul",S,[(i(!0),l(B,null,D(a,o=>(i(),l("li",{key:o.id},[v(I,{avatar:o.groupAvatar,groupName:o.groupName,senderName:o.senderName,message:o.msg,"button-label1":_(n)("inviteList.accept"),"button-label2":_(n)("inviteList.reject"),id:o.id,onAccept:y,onReject:w},null,8,["avatar","groupName","senderName","message","button-label1","button-label2","id"])]))),128))])),[[L,f]])]),_:1})])}}},O=R(z,[["__scopeId","data-v-aea217ac"]]);export{O as default};
