import{s as n,B as o,E as i,C as r}from"./index.25c5763d.js";import{b as h}from"./friend.2ac2f8da.js";import{u as l}from"./userStore.df57d0cc.js";const f=l(),{token:a}=n(f),c=o("newFriend",{state:()=>({searchHistory:"",loading:!1,nodata:!1,nfList:[],counter:0,page:{pageSize:7,pageNum:1}}),actions:{loadNewFriends(){!this.loading&&!this.nodata&&(this.loading=!0,console.log(a.value),h(a.value,this.searchHistory,this.page).then(t=>{t.data.success?t.data.data.length>0?(this.nfList==null?this.nfList=t.data.data:this.nfList.push(...t.data.data),this.page.pageNum+=1):this.nodata=!0:i({type:"error",message:t.data.msg,showClose:!0,grouping:!0})}).catch(t=>{i({type:"error",message:r.global.t("newFriendList.loadError"),showClose:!0,grouping:!0}),console.log(t)}).finally(()=>{this.loading=!1}))},loadFirstList(){this.loading=!1,this.nodata=!1,this.page.pageNum=1,this.counter=0,this.nfList!=null&&this.nfList.splice(0,this.nfList.length),this.loadNewFriends()},tList(){let t=this.searchHistory;for(let e=0;e<7;e++){let s=[{id:this.counter.toString(),uname:t+this.counter.toString(),avatar:"https://fuss10.elemecdn.com/a/3f/3302e58f9a181d2509f3dc0fa68b0jpeg.jpeg"}];this.nfList==null?this.nfList=s:this.nfList.push(...s),this.counter+=1}},delItem(t){for(let e=0;e<this.nfList.length;e++)if(t==this.nfList[e].id){this.nfList.splice(e,1),this.nfList.length<=6&&this.loadNewFriends();return}}}});export{c as u};
